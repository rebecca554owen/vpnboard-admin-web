(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[70519],{32532:function(e,t,r){Promise.resolve().then(r.bind(r,93540))},93540:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return C}});var a=r(52948),n=r(30786),s=r(22336),l=r(68119),i=r(24293),o=r(44645),d=r(26614),c=r(92887),u=r(56815),m=r(44517),f=r(78324),x=r(72216),p=r(89986),h=r(83336),j=r(46959),g=r(19921),b=r(2720),y=r(44783),N=r(18849),v=r(31050),w=r(52467);function k(e){let{onSubmit:t,initialValues:r,loading:d,trigger:c,title:m}=e,{lng:f}=(0,s.useParams)(),{t:k}=(0,l.$G)(f,"user"),[C,z]=(0,n.useState)(!1),_=j.z.object({user_name:j.z.string().email(k("form.invalidEmailFormat")),password:j.z.string().optional(),product_id:j.z.number().optional(),duration:j.z.number().optional(),referer_username:j.z.string().email(k("form.invalidEmailFormat")).optional(),refer_code:j.z.string().optional(),is_manager:j.z.boolean().optional()}),I=(0,h.cI)({resolver:(0,x.F)(_),defaultValues:{...r}});async function S(e){await t(e)&&z(!1)}(0,n.useEffect)(()=>{null==I||I.reset(r)},[I,r]);let{data:E}=(0,o.a)({queryKey:["postAdminProductList"],queryFn:async()=>{let{data:e}=await (0,i._n)({});return e.data}});return(0,a.jsxs)(w.yo,{open:C,onOpenChange:z,children:[(0,a.jsx)(w.aM,{asChild:!0,children:(0,a.jsx)(g.z,{size:"sm",onClick:()=>{I.reset(),z(!0)},children:c})}),(0,a.jsxs)(w.ue,{children:[(0,a.jsx)(w.Tu,{children:(0,a.jsx)(w.bC,{children:m})}),(0,a.jsx)(N.x,{className:"-mx-6 h-[calc(100vh-48px-36px-36px)]",children:(0,a.jsx)(b.l0,{...I,children:(0,a.jsxs)("form",{onSubmit:I.handleSubmit(S),className:"space-y-4 px-6 pt-4",children:[(0,a.jsx)(b.Wi,{control:I.control,name:"user_name",render:e=>{let{field:t}=e;return(0,a.jsxs)(b.xJ,{children:[(0,a.jsx)(b.lX,{children:k("form.userEmail")}),(0,a.jsx)(b.NI,{children:(0,a.jsx)(y.I,{placeholder:k("form.userEmailPlaceholder"),...t})}),(0,a.jsx)(b.zG,{})]})}}),(0,a.jsx)(b.Wi,{control:I.control,name:"password",render:e=>{let{field:t}=e;return(0,a.jsxs)(b.xJ,{children:[(0,a.jsx)(b.lX,{children:k("form.password")}),(0,a.jsx)(b.NI,{children:(0,a.jsx)(y.I,{placeholder:k("form.passwordPlaceholder"),...t})}),(0,a.jsx)(b.zG,{})]})}}),(0,a.jsx)(b.Wi,{control:I.control,name:"product_id",render:e=>{var t;let{field:r}=e;return(0,a.jsxs)(b.xJ,{children:[(0,a.jsx)(b.lX,{children:k("form.assignProduct")}),(0,a.jsx)(b.NI,{children:(0,a.jsxs)(v.Ph,{onValueChange:e=>{r.onChange(Number(e))},defaultValue:r.value&&String(r.value),children:[(0,a.jsx)(b.NI,{children:(0,a.jsx)(v.i4,{children:(0,a.jsx)(v.ki,{placeholder:k("form.productPlaceholder")})})}),(0,a.jsx)(v.Bw,{children:null==E?void 0:null===(t=E.list)||void 0===t?void 0:t.map(e=>(0,a.jsx)(v.Ql,{value:String(e.id),children:e.name},e.id))})]})}),(0,a.jsx)(b.zG,{})]})}}),(0,a.jsx)(b.Wi,{control:I.control,name:"duration",render:e=>{let{field:t}=e;return(0,a.jsxs)(b.xJ,{children:[(0,a.jsx)(b.lX,{children:k("form.duration")}),(0,a.jsx)(b.NI,{children:(0,a.jsx)(y.I,{placeholder:k("form.durationPlaceholder"),...t,type:"number",value:t.value?Number(t.value):void 0,onChange:e=>{t.onChange(e.target.value?Number(e.target.value):void 0)}})}),(0,a.jsx)(b.zG,{})]})}}),(0,a.jsx)(b.Wi,{control:I.control,name:"referer_username",render:e=>{let{field:t}=e;return(0,a.jsxs)(b.xJ,{children:[(0,a.jsx)(b.lX,{children:k("form.refererEmail")}),(0,a.jsx)(b.NI,{children:(0,a.jsx)(y.I,{placeholder:k("form.refererEmailPlaceholder"),...t})}),(0,a.jsx)(b.zG,{})]})}}),(0,a.jsx)(b.Wi,{control:I.control,name:"refer_code",render:e=>{let{field:t}=e;return(0,a.jsxs)(b.xJ,{children:[(0,a.jsx)(b.lX,{children:k("form.inviteCode")}),(0,a.jsx)(b.NI,{children:(0,a.jsx)(y.I,{placeholder:k("form.inviteCodePlaceholder"),...t})}),(0,a.jsx)(b.zG,{})]})}}),(0,a.jsx)(b.Wi,{control:I.control,name:"balance",render:e=>{let{field:t}=e;return(0,a.jsxs)(b.xJ,{children:[(0,a.jsx)(b.lX,{children:k("form.balance")}),(0,a.jsx)(b.NI,{children:(0,a.jsx)(y.I,{placeholder:k("form.balancePlaceholder"),...t,type:"number",value:t.value?Number(t.value):void 0,onChange:e=>{t.onChange(e.target.value?Number(e.target.value):void 0)}})}),(0,a.jsx)(b.zG,{})]})}}),(0,a.jsx)(b.Wi,{control:I.control,name:"is_manager",render:e=>{let{field:t}=e;return(0,a.jsxs)(b.xJ,{children:[(0,a.jsx)(b.lX,{children:k("form.manager")}),(0,a.jsx)(b.NI,{children:(0,a.jsx)("div",{className:"pt-2",children:(0,a.jsx)(u.r,{checked:!!t.value,onCheckedChange:t.onChange})})}),(0,a.jsx)(b.zG,{})]})}})]})})}),(0,a.jsxs)(w.FF,{className:"flex-row justify-end gap-2 pt-3",children:[(0,a.jsx)(g.z,{variant:"outline",disabled:d,onClick:()=>{z(!1)},children:k("form.cancel")}),(0,a.jsxs)(g.z,{disabled:d,onClick:I.handleSubmit(S),children:[d&&(0,a.jsx)(p.Icon,{icon:"mdi:loading",className:"mr-2 animate-spin"})," ",k("form.confirm")]})]})]})]})}function C(){let{lng:e}=(0,s.useParams)(),{t}=(0,l.$G)(e,"user"),[r,x]=(0,n.useState)(!1),[p,h]=(0,n.useState)({page:1,size:50}),{data:j,refetch:g}=(0,o.a)({queryKey:["postAdminUserList",p],queryFn:async()=>{let{data:e}=await (0,i.o9)(p);return e.data}}),b=[{accessorKey:"enable",header:t("enable"),cell:e=>{let{row:t}=e;return(0,a.jsx)(u.r,{checked:t.getValue("enable")})}},{accessorKey:"user_name",header:t("userName")},{accessorKey:"balance",header:t("balance")},{accessorKey:"created_at",header:t("createdAt"),cell:e=>{let{row:t}=e;return(0,d.WU)(t.getValue("created_at"),"yyyy-MM-dd HH:mm:ss")}},{id:"actions",accessorKey:"id",header:()=>(0,a.jsx)("div",{className:"text-right",children:t("actions")}),cell:e=>{let{row:n}=e;return(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)(k,{trigger:t("edit"),title:t("editUser"),loading:r,initialValues:n.original,onSubmit:async e=>{x(!0);try{return await (0,i.JZ)({...n.original,...e}),c.A.success(t("updateSuccess")),g(),x(!1),!0}catch(e){return x(!1),!1}}}),(0,a.jsx)(f.Z,{trigger:t("delete"),title:t("confirmDelete"),description:t("deleteDescription"),onConfirm:async()=>{await (0,i.tx)({id:n.original.id}),c.A.success(t("deleteSuccess")),g()},onCancelText:t("cancel"),onConfirmText:t("confirm")})]})}}];return(0,a.jsx)(m.w,{header:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h1",{children:t("userList")}),(0,a.jsx)(k,{trigger:t("create"),title:t("createUser"),loading:r,onSubmit:async e=>{x(!0);try{return await (0,i.gX)(e),c.A.success(t("createSuccess")),g(),x(!1),!0}catch(e){return x(!1),!1}}})]}),columns:b,data:(null==j?void 0:j.list)||[],pagination:{page:p.page,size:p.size,total:null==j?void 0:j.total,onChange:(e,t)=>{h({...p,page:e,size:t})}},operations:{remove:async e=>{e.forEach(async e=>{await (0,i.tx)({id:e.id})}),c.A.success(t("deleteSuccess")),g()}}})}},2720:function(e,t,r){"use strict";r.d(t,{NI:function(){return h},Wi:function(){return u},l0:function(){return d},lX:function(){return p},xJ:function(){return x},zG:function(){return j}});var a=r(52948),n=r(30786),s=r(63911),l=r(83336),i=r(33412),o=r(81623);let d=l.RV,c=n.createContext({}),u=e=>{let{...t}=e;return(0,a.jsx)(c.Provider,{value:{name:t.name},children:(0,a.jsx)(l.Qr,{...t})})},m=()=>{let e=n.useContext(c),t=n.useContext(f),{getFieldState:r,formState:a}=(0,l.Gc)(),s=r(e.name,a);if(!e)throw Error("useFormField should be used within <FormField>");let{id:i}=t;return{id:i,name:e.name,formItemId:"".concat(i,"-form-item"),formDescriptionId:"".concat(i,"-form-item-description"),formMessageId:"".concat(i,"-form-item-message"),...s}},f=n.createContext({}),x=n.forwardRef((e,t)=>{let{className:r,...s}=e,l=n.useId();return(0,a.jsx)(f.Provider,{value:{id:l},children:(0,a.jsx)("div",{ref:t,className:(0,i.cn)("space-y-2",r),...s})})});x.displayName="FormItem";let p=n.forwardRef((e,t)=>{let{className:r,...n}=e,{error:s,formItemId:l}=m();return(0,a.jsx)(o._,{ref:t,className:(0,i.cn)(s&&"text-destructive",r),htmlFor:l,...n})});p.displayName="FormLabel";let h=n.forwardRef((e,t)=>{let{...r}=e,{error:n,formItemId:l,formDescriptionId:i,formMessageId:o}=m();return(0,a.jsx)(s.g7,{ref:t,id:l,"aria-describedby":n?"".concat(i," ").concat(o):"".concat(i),"aria-invalid":!!n,...r})});h.displayName="FormControl",n.forwardRef((e,t)=>{let{className:r,...n}=e,{formDescriptionId:s}=m();return(0,a.jsx)("p",{ref:t,id:s,className:(0,i.cn)("text-[0.8rem] text-muted-foreground",r),...n})}).displayName="FormDescription";let j=n.forwardRef((e,t)=>{let{className:r,children:n,...s}=e,{error:l,formMessageId:o}=m(),d=l?String(null==l?void 0:l.message):n;return d?(0,a.jsx)("p",{ref:t,id:o,className:(0,i.cn)("text-[0.8rem] font-medium text-destructive",r),...s,children:d}):null});j.displayName="FormMessage"},31050:function(e,t,r){"use strict";r.d(t,{Bw:function(){return x},DI:function(){return d},Ph:function(){return o},Ql:function(){return p},i4:function(){return u},ki:function(){return c}});var a=r(52948),n=r(30786),s=r(28523),l=r(21418),i=r(33412);let o=l.fC,d=l.ZA,c=l.B4,u=n.forwardRef((e,t)=>{let{className:r,children:n,...o}=e;return(0,a.jsxs)(l.xz,{ref:t,className:(0,i.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r),...o,children:[n,(0,a.jsx)(l.JO,{asChild:!0,children:(0,a.jsx)(s.jnn,{className:"size-4 opacity-50"})})]})});u.displayName=l.xz.displayName;let m=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(l.u_,{ref:t,className:(0,i.cn)("flex cursor-default items-center justify-center py-1",r),...n,children:(0,a.jsx)(s.g8U,{})})});m.displayName=l.u_.displayName;let f=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(l.$G,{ref:t,className:(0,i.cn)("flex cursor-default items-center justify-center py-1",r),...n,children:(0,a.jsx)(s.v4q,{})})});f.displayName=l.$G.displayName;let x=n.forwardRef((e,t)=>{let{className:r,children:n,position:s="popper",...o}=e;return(0,a.jsx)(l.h_,{children:(0,a.jsxs)(l.VY,{ref:t,className:(0,i.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===s&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:s,...o,children:[(0,a.jsx)(m,{}),(0,a.jsx)(l.l_,{className:(0,i.cn)("p-1","popper"===s&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:n}),(0,a.jsx)(f,{})]})})});x.displayName=l.VY.displayName,n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(l.__,{ref:t,className:(0,i.cn)("px-2 py-1.5 text-sm font-semibold",r),...n})}).displayName=l.__.displayName;let p=n.forwardRef((e,t)=>{let{className:r,children:n,...o}=e;return(0,a.jsxs)(l.ck,{ref:t,className:(0,i.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...o,children:[(0,a.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,a.jsx)(l.wU,{children:(0,a.jsx)(s.nQG,{className:"size-4"})})}),(0,a.jsx)(l.eT,{children:n})]})});p.displayName=l.ck.displayName,n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(l.Z0,{ref:t,className:(0,i.cn)("-mx-1 my-1 h-px bg-muted",r),...n})}).displayName=l.Z0.displayName},52467:function(e,t,r){"use strict";r.d(t,{FF:function(){return h},Tu:function(){return p},aM:function(){return c},bC:function(){return j},ue:function(){return x},yo:function(){return d}});var a=r(52948),n=r(30786),s=r(97647),l=r(28523),i=r(14709),o=r(33412);let d=s.fC,c=s.xz;s.x8;let u=s.h_,m=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.aV,{className:(0,o.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...n,ref:t})});m.displayName=s.aV.displayName;let f=(0,i.j)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),x=n.forwardRef((e,t)=>{let{side:r="right",className:n,children:i,...d}=e;return(0,a.jsxs)(u,{children:[(0,a.jsx)(m,{}),(0,a.jsxs)(s.VY,{ref:t,className:(0,o.cn)(f({side:r}),n),...d,children:[i,(0,a.jsxs)(s.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,a.jsx)(l.Pxu,{className:"size-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});x.displayName=s.VY.displayName;let p=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...r})};p.displayName="SheetHeader";let h=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r})};h.displayName="SheetFooter";let j=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.Dx,{ref:t,className:(0,o.cn)("text-lg font-semibold text-foreground",r),...n})});j.displayName=s.Dx.displayName,n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.dk,{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",r),...n})}).displayName=s.dk.displayName},56815:function(e,t,r){"use strict";r.d(t,{r:function(){return i}});var a=r(52948),n=r(30786),s=r(84051),l=r(33412);let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.fC,{className:(0,l.cn)("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",r),...n,ref:t,children:(0,a.jsx)(s.bU,{className:(0,l.cn)("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})})});i.displayName=s.fC.displayName},84051:function(e,t,r){"use strict";r.d(t,{bU:function(){return v},fC:function(){return N}});var a=r(98323),n=r(30786),s=r(88532),l=r(45477),i=r(69726),o=r(29367),d=r(20386),c=r(73123),u=r(99034);let m="Switch",[f,x]=(0,i.b)(m),[p,h]=f(m),j=(0,n.forwardRef)((e,t)=>{let{__scopeSwitch:r,name:i,checked:d,defaultChecked:c,required:m,disabled:f,value:x="on",onCheckedChange:h,...j}=e,[g,N]=(0,n.useState)(null),v=(0,l.e)(t,e=>N(e)),w=(0,n.useRef)(!1),k=!g||!!g.closest("form"),[C=!1,z]=(0,o.T)({prop:d,defaultProp:c,onChange:h});return(0,n.createElement)(p,{scope:r,checked:C,disabled:f},(0,n.createElement)(u.WV.button,(0,a.Z)({type:"button",role:"switch","aria-checked":C,"aria-required":m,"data-state":y(C),"data-disabled":f?"":void 0,disabled:f,value:x},j,{ref:v,onClick:(0,s.M)(e.onClick,e=>{z(e=>!e),k&&(w.current=e.isPropagationStopped(),w.current||e.stopPropagation())})})),k&&(0,n.createElement)(b,{control:g,bubbles:!w.current,name:i,value:x,checked:C,required:m,disabled:f,style:{transform:"translateX(-100%)"}}))}),g=(0,n.forwardRef)((e,t)=>{let{__scopeSwitch:r,...s}=e,l=h("SwitchThumb",r);return(0,n.createElement)(u.WV.span,(0,a.Z)({"data-state":y(l.checked),"data-disabled":l.disabled?"":void 0},s,{ref:t}))}),b=e=>{let{control:t,checked:r,bubbles:s=!0,...l}=e,i=(0,n.useRef)(null),o=(0,d.D)(r),u=(0,c.t)(t);return(0,n.useEffect)(()=>{let e=i.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(o!==r&&t){let a=new Event("click",{bubbles:s});t.call(e,r),e.dispatchEvent(a)}},[o,r,s]),(0,n.createElement)("input",(0,a.Z)({type:"checkbox","aria-hidden":!0,defaultChecked:r},l,{tabIndex:-1,ref:i,style:{...e.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function y(e){return e?"checked":"unchecked"}let N=j,v=g}},function(e){e.O(0,[30792,61896,94699,3869,89986,34099,92494,66035,61488,97647,17399,56856,1398,21418,82349,44517,12100,81162,1744],function(){return e(e.s=32532)}),_N_E=e.O()}]);